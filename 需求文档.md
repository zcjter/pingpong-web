# 乒乓球比赛管理系统 - 需求文档

## 1. 项目概述

### 1.1 项目背景
本系统是一个乒乓球比赛管理Web应用，用于管理运动员信息、赛事数据、比赛记录、排名积分及系统公告。

### 1.2 技术栈
- **后端**：Spring Boot 2.7.14 + Spring Data JPA + MySQL
- **前端**：原生 HTML + CSS + JavaScript
- **构建工具**：Maven
- **Java版本**：JDK 11

---

## 2. 功能模块

### 2.1 运动员管理 (Players)
| 功能 | 描述 |
|------|------|
| 列表查询 | 获取所有运动员列表 |
| 按排名排序 | 按积分高低排序显示 |
| 详情查询 | 根据ID获取单个运动员详情 |
| 搜索 | 按关键字搜索运动员 |
| 新增 | 创建新运动员记录 |
| 编辑 | 修改运动员信息 |
| 删除 | 删除运动员记录 |
| 积分更新 | 更新运动员排名积分 |

**运动员字段**：
- 姓名 (name) - 必填
- 国家 (country)
- 年龄 (age)
- 性别 (gender)
- 排名积分 (rankingPoints)
- 头像 (avatar)
- 简介 (introduction)
- 创建时间 / 更新时间

### 2.2 赛事管理 (Competitions)
| 功能 | 描述 |
|------|------|
| 列表查询 | 获取所有赛事列表 |
| 活跃赛事 | 获取当前活跃的赛事 |
| 详情查询 | 根据ID获取赛事详情 |
| 新增 | 创建新赛事 |
| 编辑 | 修改赛事信息 |
| 删除 | 删除赛事记录 |

**赛事字段**：
- 赛事名称 (name) - 必填
- 开始日期 (startDate)
- 结束日期 (endDate)
- 地点 (location)
- 描述 (description)
- 是否活跃 (isActive)
- 赛事年份 (competitionYear)
- 创建时间

### 2.3 比赛管理 (Matches)
| 功能 | 描述 |
|------|------|
| 列表查询 | 获取所有比赛记录 |
| 详情查询 | 根据ID获取比赛详情 |
| 按状态筛选 | 根据比赛状态筛选 |
| 按赛事筛选 | 获取某赛事下的所有比赛 |
| 新增 | 创建新比赛记录 |
| 编辑 | 修改比赛信息 |
| 删除 | 删除比赛记录 |

**比赛字段**：
- 赛事ID (competitionId)
- 选手1 ID/姓名/国家
- 选手2 ID/姓名/国家
- 比分 (scores) - JSON格式
- 选手1总得分 / 选手2总得分
- 比赛场馆 (venue)
- 比赛日期 (matchDate)
- 状态 (status): scheduled/ongoing/completed/cancelled
- 备注 (remark)
- 轮次 (roundNumber): 1/4决赛、半决赛、决赛
- 项目类别 (category): 男单/女单/男双/女双/混双/男团/女团
- 创建时间 / 更新时间

### 2.4 公告管理 (Announcements)
| 功能 | 描述 |
|------|------|
| 列表查询 | 获取所有公告 |
| 已发布公告 | 获取已发布的公告列表 |
| 详情查询 | 根据ID获取公告详情 |
| 新增 | 创建新公告 |
| 编辑 | 修改公告信息 |
| 删除 | 删除公告记录 |

**公告字段**：
- 标题 (title) - 必填
- 内容 (content) - 必填
- 类型 (type): news/notice/system
- 是否发布 (isPublished)
- 创建时间 / 更新时间

### 2.5 排名管理 (PlayerRankings)
| 功能 | 描述 |
|------|------|
| 列表查询 | 获取所有排名记录 |
| 年份列表 | 获取所有有排名的年份 |
| 按年份查询 | 获取指定年份的排名 |
| 按年份+项目查询 | 获取指定年份和项目的排名 |
| 按项目查询 | 获取指定项目的排名 |
| 新增 | 创建新排名记录 |
| 编辑 | 修改排名信息 |
| 删除 | 删除排名记录 |

**排名字段**：
- 运动员ID (playerId)
- 运动员姓名 (playerName)
- 国家 (country)
- 排名 (ranking)
- 积分 (points)
- 项目类别 (category): 男单/女单/男双/女双/混双/男团/女团
- 排名年份 (rankingYear)
- 创建时间

---

## 3. API接口设计

### 3.1 运动员 API
| 方法 | 路径 | 描述 |
|------|------|------|
| GET | /api/players | 获取所有运动员 |
| GET | /api/players/ranking | 按积分排序获取运动员 |
| GET | /api/players/{id} | 获取单个运动员 |
| GET | /api/players/search?keyword=xxx | 搜索运动员 |
| POST | /api/players | 新增运动员 |
| PUT | /api/players/{id} | 更新运动员 |
| DELETE | /api/players/{id} | 删除运动员 |
| PUT | /api/players/{id}/ranking?points=xxx | 更新积分 |

### 3.2 赛事 API
| 方法 | 路径 | 描述 |
|------|------|------|
| GET | /api/competitions | 获取所有赛事 |
| GET | /api/competitions/active | 获取活跃赛事 |
| GET | /api/competitions/{id} | 获取单个赛事 |
| POST | /api/competitions | 新增赛事 |
| PUT | /api/competitions/{id} | 更新赛事 |
| DELETE | /api/competitions/{id} | 删除赛事 |

### 3.3 比赛 API
| 方法 | 路径 | 描述 |
|------|------|------|
| GET | /api/matches | 获取所有比赛 |
| GET | /api/matches/{id} | 获取单个比赛 |
| GET | /api/matches/status/{status} | 按状态筛选 |
| GET | /api/matches/competition/{competitionId} | 获取赛事下的比赛 |
| POST | /api/matches | 新增比赛 |
| PUT | /api/matches/{id} | 更新比赛 |
| DELETE | /api/matches/{id} | 删除比赛 |

### 3.4 公告 API
| 方法 | 路径 | 描述 |
|------|------|------|
| GET | /api/announcements | 获取所有公告 |
| GET | /api/announcements/published | 获取已发布公告 |
| GET | /api/announcements/{id} | 获取单个公告 |
| POST | /api/announcements | 新增公告 |
| PUT | /api/announcements/{id} | 更新公告 |
| DELETE | /api/announcements/{id} | 删除公告 |

### 3.5 排名 API
| 方法 | 路径 | 描述 |
|------|------|------|
| GET | /api/rankings | 获取所有排名 |
| GET | /api/rankings/years | 获取年份列表 |
| GET | /api/rankings/year/{year} | 获取年份排名 |
| GET | /api/rankings/year/{year}/category/{category} | 按年份+项目查询 |
| GET | /api/rankings/category/{category} | 按项目查询 |
| GET | /api/rankings/{id} | 获取单条排名 |
| POST | /api/rankings | 新增排名 |
| PUT | /api/rankings/{id} | 更新排名 |
| DELETE | /api/rankings/{id} | 删除排名 |

---

## 4. 前端页面功能

### 4.1 首页 (Home)
- 显示最新公告列表
- 显示各项目实时排名TOP 3
- 公告管理功能（增删改）

### 4.2 著名运动员 (Players)
- 运动员卡片式列表展示
- 运动员搜索功能
- 运动员详情页（包含积分、排名等信息）
- 运动员增删改功能

### 4.3 赛事管理 (Competitions)
- 赛事列表（按年份分组）
- 年份筛选功能
- 赛事详情（含比赛记录）
- 比赛管理（增删改）
- 赛事增删改功能

### 4.4 排名管理 (Ranking)
- 年份+项目筛选
- 排名列表展示
- 排名增删改功能

### 4.5 赛事冠军 (Champions)
- 赛事冠军榜展示

---

## 5. 数据库设计

### 5.1 数据表
1. **players** - 运动员表
2. **competitions** - 赛事表
3. **matches** - 比赛表
4. **announcements** - 公告表
5. **player_rankings** - 排名表

---

## 6. 非功能性需求

- 前端支持跨域访问 (CORS: *)
- 后端默认端口：8090
- 所有实体包含创建/更新时间戳
- 使用Lombok简化代码
